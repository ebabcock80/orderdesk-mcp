# ============================================================================
# Staging Environment Configuration
# ============================================================================
# 
# Purpose: Pre-production testing environment
# Use: QA testing, client demos, integration testing
# Security: Production-like with test data
#
# Setup: cp .env.staging.example .env.staging
#
# ============================================================================

# ============================================================================
# Core Configuration
# ============================================================================
MCP_KMS_KEY=CHANGE-ME-staging-kms-key-must-be-32-bytes-or-longer-secure-value

# Database
DATABASE_URL=sqlite:///./data/staging.db
# For production-like testing:
# DATABASE_URL=postgresql://user:pass@postgres:5432/orderdesk_staging

# Server
PORT=8000
TRUST_PROXY=true
LOG_LEVEL=INFO

# ============================================================================
# Caching
# ============================================================================
CACHE_BACKEND=redis
REDIS_URL=redis://redis:6379/0

# Cache TTLs (seconds)
CACHE_TTL_ORDERS=15
CACHE_TTL_PRODUCTS=60
CACHE_TTL_CUSTOMERS=300
CACHE_TTL_STORE_SETTINGS=3600

# ============================================================================
# HTTP Client & Resilience
# ============================================================================
HTTP_TIMEOUT_CONNECT=15.0
HTTP_TIMEOUT_READ=60.0
HTTP_TIMEOUT_WRITE=60.0
HTTP_TIMEOUT_POOL=5.0
HTTP_MAX_RETRIES=3
MUTATION_MAX_RETRIES=5

# ============================================================================
# Security & Authentication
# ============================================================================
# Master key auth
ENABLE_AUTO_PROVISION=false

# CORS (staging domain)
ALLOWED_ORIGINS=https://staging.yourdomain.com

# ============================================================================
# WebUI (Optional - Enable for testing)
# ============================================================================
ENABLE_WEBUI=true
ENABLE_PUBLIC_SIGNUP=false

# JWT
JWT_SECRET_KEY=CHANGE-ME-staging-jwt-secret-must-be-32-chars-or-longer
SESSION_TIMEOUT=3600
MAGIC_LINK_EXPIRY=900

# Session Cookies
SESSION_COOKIE_NAME=orderdesk_mcp_session
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# Email (use test provider)
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USER=your-mailtrap-user
SMTP_PASSWORD=your-mailtrap-password
SMTP_FROM=staging@yourdomain.com
SMTP_TLS=true
REQUIRE_EMAIL_VERIFICATION=true

# CSRF
CSRF_SECRET_KEY=CHANGE-ME-staging-csrf-secret-must-be-32-chars

# Rate Limiting (production-like)
WEBUI_RATE_LIMIT_LOGIN=5/minute
WEBUI_RATE_LIMIT_SIGNUP=3/hour
WEBUI_RATE_LIMIT_API_CONSOLE=100/minute

# ============================================================================
# Testing & Integration Tests
# ============================================================================
ORDERDESK_TEST_ENABLED=true
ORDERDESK_TEST_STORE_ID=your-test-store-id
ORDERDESK_TEST_API_KEY=your-test-api-key

# ============================================================================
# Observability
# ============================================================================
ENABLE_METRICS=true
ENABLE_DETAILED_HEALTH=true
ENABLE_TRACE_VIEWER=true
ENABLE_AUDIT_LOG=true
AUDIT_LOG_RETENTION_DAYS=30

# ============================================================================
# Staging Notes
# ============================================================================
# 
# Purpose:
# - Test production-like configuration
# - Validate deployments before production
# - Client demos and QA testing
# - Performance testing
#
# Security:
# - Use strong secrets (but not production secrets)
# - Enable HTTPS/TLS for realistic testing
# - Test rate limiting and auth flows
# - Use test email provider (Mailtrap, etc)
#
# Database:
# - Use SQLite for quick setup
# - Use PostgreSQL for production-like testing
# - Reset regularly for clean state
#
# Monitoring:
# - All observability features enabled
# - Test Grafana/Prometheus integration
# - Validate alert configurations
#
# ============================================================================
