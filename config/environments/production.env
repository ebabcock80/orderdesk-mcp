# OrderDesk MCP Server - Production Environment
# =============================================================================
# Optimized for production deployment with maximum security
# ⚠️ ALL SECRETS MUST BE CHANGED FROM DEFAULTS!
# =============================================================================

# REQUIRED: Encryption & Security
# -----------------------------------------------------------------------------
# ⚠️ CRITICAL: Generate unique, strong keys for production!
MCP_KMS_KEY=CHANGE_ME_REQUIRED_openssl_rand_base64_32
ADMIN_MASTER_KEY=CHANGE_ME_REQUIRED_python_secrets_token_urlsafe_48

# Core Server
# -----------------------------------------------------------------------------
PORT=8080
PUBLIC_URL=https://yourdomain.com
DATABASE_URL=sqlite:///data/app.db
LOG_LEVEL=INFO
TRUST_PROXY=true
AUTO_PROVISION_TENANT=false

# WebUI
# -----------------------------------------------------------------------------
ENABLE_WEBUI=true
JWT_SECRET_KEY=CHANGE_ME_REQUIRED_openssl_rand_base64_48
SESSION_TIMEOUT=28800
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict
CSRF_SECRET_KEY=CHANGE_ME_REQUIRED_openssl_rand_base64_32

# Rate Limiting (Production - Strict)
# -----------------------------------------------------------------------------
RATE_LIMIT_RPM=120
WEBUI_RATE_LIMIT_LOGIN=5
WEBUI_RATE_LIMIT_SIGNUP=2
WEBUI_RATE_LIMIT_API_CONSOLE=30
SIGNUP_RATE_LIMIT_PER_HOUR=3

# Public Signup (Disable for Private Deployments)
# -----------------------------------------------------------------------------
ENABLE_PUBLIC_SIGNUP=false
REQUIRE_EMAIL_VERIFICATION=true
SIGNUP_VERIFICATION_EXPIRY=900

# Email (Production SMTP Required if Signup Enabled)
# -----------------------------------------------------------------------------
EMAIL_PROVIDER=smtp
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=CHANGE_ME_YOUR_SENDGRID_API_KEY
SMTP_USE_TLS=true
SMTP_FROM_EMAIL=noreply@yourdomain.com

# Caching (Redis for Multi-Instance Production)
# -----------------------------------------------------------------------------
CACHE_BACKEND=redis
REDIS_URL=redis://redis:6379/0
CACHE_TTL_ORDERS=15
CACHE_TTL_PRODUCTS=60
CACHE_TTL_CUSTOMERS=60
CACHE_TTL_STORE_SETTINGS=300

# HTTP Client
# -----------------------------------------------------------------------------
HTTP_TIMEOUT=30
HTTP_MAX_RETRIES=3
MUTATION_MAX_RETRIES=5

# Monitoring
# -----------------------------------------------------------------------------
ENABLE_METRICS=true
ENABLE_DETAILED_HEALTH=false
ENABLE_AUDIT_LOG=true
AUDIT_LOG_RETENTION_DAYS=90
ENABLE_TRACE_VIEWER=false

# Testing (Disabled in Production)
# -----------------------------------------------------------------------------
ORDERDESK_TEST_ENABLED=false

# =============================================================================
# Production Security Checklist
# =============================================================================
#
# BEFORE DEPLOYING TO PRODUCTION:
#
# [ ] Generate unique MCP_KMS_KEY (not from development!)
# [ ] Generate unique ADMIN_MASTER_KEY (not from development!)
# [ ] Generate unique JWT_SECRET_KEY (not from development!)
# [ ] Generate unique CSRF_SECRET_KEY (not from development!)
# [ ] Set correct PUBLIC_URL (your actual domain)
# [ ] Configure real SMTP credentials (if using signup)
# [ ] Set TRUST_PROXY=true if behind nginx/load balancer
# [ ] Set AUTO_PROVISION_TENANT=false (disable auto-provisioning)
# [ ] Set SESSION_COOKIE_SECURE=true (HTTPS required)
# [ ] Set ENABLE_DETAILED_HEALTH=false (hide internal details)
# [ ] Set ENABLE_TRACE_VIEWER=false (security risk)
# [ ] Set LOG_LEVEL=INFO or WARNING (not DEBUG)
# [ ] Configure Redis for CACHE_BACKEND (not memory for multi-instance)
# [ ] Set ENABLE_PUBLIC_SIGNUP based on your needs
# [ ] Disable integration tests (ORDERDESK_TEST_ENABLED=false)
# [ ] Review rate limits for your expected load
# [ ] Set up SSL/TLS certificates
# [ ] Configure firewall rules
# [ ] Set up monitoring alerts
# [ ] Configure backup automation
# [ ] Test failover procedures
#
# =============================================================================
# Production Deployment
# =============================================================================
#
# Docker Compose:
#   docker-compose -f docker-compose.production.yml up -d
#
# Kubernetes:
#   kubectl apply -f k8s/
#
# Health Checks:
#   curl https://yourdomain.com/health
#   curl https://yourdomain.com/health/ready
#
# Metrics:
#   curl https://yourdomain.com/metrics
#
# =============================================================================
# Environment-Specific Notes
# =============================================================================
#
# Production vs Staging vs Development:
#
# | Setting | Development | Staging | Production |
# |---------|-------------|---------|------------|
# | LOG_LEVEL | DEBUG | INFO | INFO/WARNING |
# | CACHE_BACKEND | memory | sqlite/redis | redis |
# | AUTO_PROVISION | true | false | false |
# | COOKIE_SECURE | false | true | true |
# | TRACE_VIEWER | true | true | false |
# | DETAILED_HEALTH | true | true | false |
# | PUBLIC_SIGNUP | true | true | false* |
# | EMAIL_PROVIDER | console | smtp | smtp |
# | RATE_LIMITS | relaxed | production | strict |
#
# * Set based on your deployment model (SaaS vs private)
#

